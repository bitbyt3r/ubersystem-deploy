---
classes:
        - uber_server
        - software
        - nginx
uber_instances: 
        anthrocon:
                uber_path:      '/usr/local/anthrocon'
                organization_name: 'Anthrocon'
                sideboard_repo:       'https://github.com/magfest/sideboard'
                sideboard_branch:     'master'
# each of these repos will be cloned and put in %uber_path%/plugins/%name%
                sideboard_plugins:
                    uber:
                           git_repo: 'https://github.com/magfest/ubersystem'
                           git_branch: 'ac-staging'
                    anthrocon_plugin:
                           git_repo: 'https://github.com/Anthrocon-Reg/anthrocon_plugin'
                           git_branch: 'master'
                socket_port:    '4304'
                url_prefix:     'anthrocon'
                uber_user:      'uber'
                hostname:       '%{hostname}'
                event_name:     'Anthrocon'
                year: 2015
                dev_box: 'True'
                send_emails: 'False'
                collect_exact_birthdate: 'True'
                groups_enabled: 'False'
                prereg_open:  '2014-09-30'
                stripe_public_key: 'pk_test_sPIOYrr26T7YeSJ8lUGKYwpS'
                stripe_secret_key: 'sk_test_aZUo9nidH2Pun2CQ4Bp0nFzU'
nginx::nginx_vhosts:
        '%{hostname}':
                listen_options: 'default'
                www_root: '/var/www'
                rewrite_to_https: true
                ssl: true
                ssl_cert: 'puppet:///modules/uber/magfest.org.crt-bundle'
                ssl_key: 'puppet:///modules/uber/magfest.org.key'
                location_cfg_append:
                        rewrite: '/ /anthrocon/ permanent'
        'localhost':
                listen_ip: '127.0.0.1'
                www_root: '/var/www'
                location_cfg_append:
                        rewrite: '/ https://%{hostname}/anthrocon/ permanent'
nginx::nginx_locations:
        'munin':
                vhost: '%{hostname}' 
                ssl_only: true
                ssl: true
                location: '/munin/'
                location_alias: '/var/cache/munin/www/'
                auth_basic: 'Restricted'
                auth_basic_user_file: '/etc/munin/munin-htpasswd'
        'nginx_status':
                vhost: 'localhost'
                location: '/nginx_status'
                stub_status: true
                location_allow:
                        - '127.0.0.1'
                location_deny:
                        - 'all'
